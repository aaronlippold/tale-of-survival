---
import GalleryImage from "./GalleryImage.astro";

interface Props {
  images: Array<{
    url: string;
    alt: string;
  }>;
}

const { images } = Astro.props;
---

<div class="gallery-container">
  <wa-carousel
    navigation
    pagination
    loop
    class="w-full max-w-6xl mx-auto gallery-carousel"
    style="--wa-carousel-aspect-ratio: 16/9;"
  >
    {images.map((image) => <GalleryImage {...image} />)}
  </wa-carousel>

  <div class="flex justify-center gap-4 mt-4">
    <wa-button
      variant="outline"
      onclick="document.querySelector('wa-carousel').prev()"
    >
      <wa-icon name="chevron-left"></wa-icon>
      Previous
    </wa-button>
    <wa-button
      variant="outline"
      onclick="document.querySelector('wa-carousel').next()"
    >
      Next
      <wa-icon name="chevron-right"></wa-icon>
    </wa-button>
  </div>
</div>

<script>
  document.addEventListener("astro:page-load", () => {
    const carousel = document.querySelector("wa-carousel");

    // Add keyboard navigation
    document.addEventListener("keydown", (e) => {
      if (!carousel) return;

      switch (e.key) {
        case "ArrowLeft":
          carousel.prev();
          break;
        case "ArrowRight":
          carousel.next();
          break;
      }
    });
  });
</script>

<style>
  .gallery-container {
    --wa-carousel-slide-gap: 1rem;
    --wa-carousel-navigation-color: var(--book-theme-color, #ff9500);
    --wa-carousel-pagination-color: var(--book-theme-color, #ff9500);
    margin: 2rem auto;
  }

  wa-carousel {
    background: #01060f;
    border-radius: 0.5rem;
    overflow: hidden;
    box-shadow:
      0 4px 6px -1px rgba(0, 0, 0, 0.1),
      0 2px 4px -1px rgba(0, 0, 0, 0.06);
  }

  wa-button {
    --wa-button-color: var(--book-theme-color, #ff9500);
  }
</style>
